<!DOCTYPE html>
<html>
<head>
    <title>CSS Playing Cards</title>
    <link rel="stylesheet" type="text/css" href="cards.css" media="screen" />
    <!--[if lt IE 9]>
        <link rel="stylesheet" type="text/css" href="cards-ie.css" media="screen" />
    <![endif]-->
    <!--[if IE 9]>
        <link rel="stylesheet" type="text/css" href="cards-ie9.css" media="screen" />
    <![endif]-->
    <link href="http://code.jquery.com/ui/1.11.2/themes/ui-lightness/jquery-ui.css" rel="stylesheet">
    <script src="http://code.jquery.com/jquery-1.11.2.js"></script>
    <script src="http://code.jquery.com/ui/1.11.2/jquery-ui.js"></script>
    <script src="http://js.leapmotion.com/leap-0.6.4.js"></script>
    <script src="jquery.ui.touch-punch.js"></script>
    <script src="jquery.simulate.js"></script>
    <script>

        
        $(function() {
            $( ".hand" ).sortable({
                //revert: true
            });
            
 			//$( ".dealable li" ).draggable({
			// $( ".deck li" ).draggable({
//                 connectToSortable: ".hand",
//                 helper: "original",
//                 revert: "false",
//                 drag: function(){
//             		var offset = $(this).offset();
//             		var xPos = offset.left;
//             		var yPos = offset.top;
//             		console.log('x: ' + xPos);
//             		console.log('y: ' + yPos);
//        			 },
//        			stop: function(){
//             		var finalOffset = $(this).offset();
//             		var finalxPos = finalOffset.left;
//             		var finalyPos = finalOffset.top;
//             		console.log('Final X: ' + finalxPos);
//             		console.log('Final Y: ' + finalyPos);
//             		var this_class = $(this).attr("div");
//             		console.log($(this));
//             	}
//             });
            
            //  $( "li" ).draggable({
//                 connectToSortable: ".hand",
//                 //connectToSortable: ".table",
//                 helper: "original",
//                 revert: "false"
//             });

			var first = true;
			var xPos, yPos;

			$( "li" ).draggable({
                helper: "original",
                revert: "false",
				drag: function(){
            		var offset = $(this).offset();
            		var x = offset.left;
            		var y = offset.top;
            		if(first) { // beginning position of the card
            			first = false;
            			xPos = x;
            			yPos = y;
            		}
            		console.log('x: ' + x);
            		console.log('y: ' + y);
       			 },
       			stop: function(){
       				console.log('Begin X: ' + xPos);
            		console.log('Begin Y: ' + yPos);
       				first = true;
            		var finalOffset = $(this).offset();
            		var finalxPos = finalOffset.left;
            		var finalyPos = finalOffset.top;
            		console.log('Final X: ' + finalxPos);
            		console.log('Final Y: ' + finalyPos);
            		
            		// snap to hand
            		if(finalyPos > 415) {
            			console.log("snap hand");
            			$(this).addClass("ui-draggable-handle");
            			$(this).addClass("ui-sortable-handle");
            			$(this).removeAttr('style').css("position","relative");
            			var this_class = $(this).children();
            			//this_class = $(this).attr("div");
            			console.log(this_class);
 						$(this_class).removeClass("ui-draggable-handle");
            			$(".hand").append(this);
            			$( ".hand" ).sortable({});
            		}
            		
            		//snap to deck one
            		else if (finalyPos >= 30 && finalyPos <= 44 && 
            				 finalxPos >= 8 && finalxPos <= 32) {
            			$(this).removeAttr('style');
            			$(this).removeClass("ui-draggable-dragging");
            			$(".deck").append(this);
            			$(".one").append(this);
            			console.log("snap deck one");
            		}
            		
            		// snap to deck two
            		else if (finalyPos >= 183 && finalyPos <= 195 && 
            				 finalxPos >= 8 && finalxPos <= 32) {
            			$(this).removeAttr('style');
            			$(this).removeClass("ui-draggable-dragging");
            			$(".deck").append(this);
            			$(".two").append(this);
            			console.log("snap deck two");
            		}
            		
            		// free on table
            		else {
            			console.log("inside else");
            			// from deck one
            			if (yPos >= 30 && yPos <= 44 && 
            				 xPos >= 8 && xPos <= 32) {
            				//var victim_ul = document.getElementById('one');
            				//$(this).clone().insertAfter('.table .ui-draggable');
							//victim_ul.removeChild(this);
							
							// $('.one').each(function() {
//        					 	// save
//         					$a=$(this).children('li');
//         					// Move
//         					$($a.parent().parent()).after($a);
//         					// Delete
//         					$(this).remove();
//     						});
							
							// $(this).removeClass("deck");
// 							$(this).removeClass("one");
            				//$(".one").removeChild(this);
            				//$(this).appendTo('.table');
            				console.log("snap table from deck one");
            			}
            			// from deck two
            			else if (yPos >= 183 && yPos <= 195 && 
            				 xPos >= 8 && xPos <= 32) {
            				 
            			}
            			// from hand
            			else if(yPos > 415) {
            				console.log("from hand");
            				$(this).removeClass("ui-sortable-handle");
            				$(this).removeClass("ui-draggable-handle");
            				var this_class = $(this).children();
 							$(this_class).addClass("ui-draggable-handle");
 							//$(this).appendTo('.table');
 							
 							//
 							
 							
 							
 							
            			}
            			// from table
            			else{}
            		}
        		}
        	});
            
            $( "ul, li" ).disableSelection();
            
            
            $( "li" ).not('.ui-sortable-handle').draggable({ handle: "div" });

			$("div.card").mousedown(function(event) {
				switch (event.which) {
					case 2:
						//alert('Left Mouse button pressed.');
						break;
					case 1:
						//alert('Middle Mouse button pressed.');
						
						break;
					case 3:
						//alert('Right Mouse button pressed.');
						$(this).toggleClass("back");
						event.preventDefault();
						break;
						default:
						alert('You have a strange Mouse!');
				}
			});
			
        });
    </script>
    <style>
        body {
            color: white;
        }
        html { 
            background: url('table.jpg') no-repeat center center fixed; 
            -webkit-background-size: cover;
            -moz-background-size: cover;
            -o-background-size: cover;
            background-size: cover;
        }


        div.clear {
            clear: both;
            height: 0;
            line-height: 0;
            font-size: 1px;
            visibility: hidden;
        }
    </style>
</head>
<body oncontextmenu="return false;">
<div class="playingCards fourColours">
    <ul class="table">
        Dealable deck:
        <ul class="deck" id="one">
            <li>
                <div class="card rank-2 diams back"><span class="rank">2</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-3 diams back"><span class="rank">3</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-4 diams back"><span class="rank">4</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-5 diams back"><span class="rank">5</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-6 diams back"><span class="rank">6</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-7 diams back"><span class="rank">7</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-8 diams back"><span class="rank">8</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-9 diams back"><span class="rank">9</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-10 diams back"><span class="rank">10</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-j diams back"><span class="rank">J</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-q diams back"><span class="rank">Q</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-k diams back"><span class="rank">K</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-a diams back"><span class="rank">A</span><span class="suit">&diams;</span></div>
            </li>
        </ul>

        <ul class="deck two">
            <li>
                <div class="card rank-2 diams back"><span class="rank">2</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-3 diams back"><span class="rank">3</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-4 diams back"><span class="rank">4</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-5 diams back"><span class="rank">5</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-6 diams back"><span class="rank">6</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-7 diams back"><span class="rank">7</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-8 diams back"><span class="rank">8</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-9 diams back"><span class="rank">9</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-10 diams back"><span class="rank">10</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-j diams back"><span class="rank">J</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-q diams back"><span class="rank">Q</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-k diams back"><span class="rank">K</span><span class="suit">&diams;</span></div>
            </li>
            <li>
                <div class="card rank-a diams back"><span class="rank">A</span><span class="suit">&diams;</span></div>
            </li>
        </ul>
        <li>
            <div class="card rank-2 diams"><span class="rank">2</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-3 diams"><span class="rank">3</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-4 diams"><span class="rank">4</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-5 diams"><span class="rank">5</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-6 diams"><span class="rank">6</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-7 diams"><span class="rank">7</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-8 diams"><span class="rank">8</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-9 diams"><span class="rank">9</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-10 diams"><span class="rank">10</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-j diams"><span class="rank">J</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-q diams"><span class="rank">Q</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-k diams"><span class="rank">K</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-a diams"><span class="rank">A</span><span class="suit">&diams;</span></div>
        </li>

    </ul>
    <div class="clear"></div>
    <br><hr><br>
    Player hand:<br>
    <ul class="hand">
        <li>
            <div class="card rank-7 diams"><span class="rank">7</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-8 hearts"><span class="rank">8</span><span class="suit">&hearts;</span></div>
        </li>
        <li>
            <div class="card rank-9 spades"><span class="rank">9</span><span class="suit">&spades;</span></div>
        </li>
        <li>
            <div class="card rank-10 clubs"><span class="rank">10</span><span class="suit">&clubs;</span></div>
        </li>
        <li>
            <div class="card rank-j diams"><span class="rank">J</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-5 clubs"><span class="rank">5</span><span class="suit">&clubs;</span></div>
        </li>
        <li>
            <div class="card rank-6 diams"><span class="rank">6</span><span class="suit">&diams;</span></div>
        </li>
        <li>
            <div class="card rank-q hearts"><span class="rank">Q</span><span class="suit">&hearts;</span></div>
        </li>
        <li>
            <div class="card rank-k spades"><span class="rank">K</span><span class="suit">&spades;</span></div>
        </li>
    </ul>
    <div class="clear"></div>
</div>

</body>
</html>
